(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[657],{228:function(e,s,t){Promise.resolve().then(t.bind(t,5962))},5962:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return L}});var a=t(7437),r=t(2265),l=t(6070),n=t(2869),i=t(5974),c=t(2759),o=t(2339),d=t(9116),m=t(6110),u=t(5186),x=t(6815),p=t(3647),h=t(1828),j=t(1239),g=t(8728),f=t(6137),y=t(9763);let v=(0,y.Z)("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);var N=t(5135),b=t(9202),w=t(8906),_=t(91),k=t(5863);function D(e){let{isOpen:s,onClose:t,onSubmit:c,analysisResult:d}=e,[y,D]=(0,r.useState)("basic"),[C,S]=(0,r.useState)(!1),[Z,A]=(0,r.useState)([]),[P,z]=(0,r.useState)([]),[F,R]=(0,r.useState)({project_name:"",cloud_provider:"aws",environment:"production",domain_name:"",github_repo:"",auto_deploy:!1,framework_type:"auto-detect",enable_monitoring:!0,enable_cdn:!0,enable_ssl:!0,instance_type:"t3.micro",auto_scaling:!1,backup_enabled:!0,custom_vpc:!1}),[I,E]=(0,r.useState)({});(0,r.useEffect)(()=>{s&&(T(),O())},[s]);let T=async()=>{try{let e=await fetch("/api/v1/smart-deploy/providers");if(e.ok){let s=await e.json();A(s.providers||[])}}catch(e){console.error("Failed to fetch providers:",e)}},O=async()=>{try{let e=await fetch("/api/v1/smart-deploy/project-types");if(e.ok){let s=await e.json();z(s.project_types||[])}}catch(e){console.error("Failed to fetch project types:",e)}},B=()=>{let e={};return F.project_name.trim()?F.project_name.length<3?e.project_name="Project name must be at least 3 characters":/^[a-zA-Z0-9-_]+$/.test(F.project_name)||(e.project_name="Project name can only contain letters, numbers, hyphens, and underscores"):e.project_name="Project name is required",F.github_repo&&!F.github_repo.includes("github.com")&&(e.github_repo="Please enter a valid GitHub repository URL"),F.domain_name&&!/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(F.domain_name)&&(e.domain_name="Please enter a valid domain name"),E(e),0===Object.keys(e).length},M=async()=>{if(B()){S(!0);try{let e={...F,framework:d?.framework||d?.projectType||("auto-detect"!==F.framework_type?F.framework_type:null),framework_type:d?.framework?.type||F.framework_type,project_type:d?.projectType||d?.project_type||("auto-detect"!==F.framework_type?F.framework_type:null),analysis_result:d||null};await c(e),R({project_name:"",cloud_provider:"aws",environment:"production",domain_name:"",github_repo:"",auto_deploy:!1,framework_type:"auto-detect",enable_monitoring:!0,enable_cdn:!0,enable_ssl:!0,instance_type:"t3.micro",auto_scaling:!1,backup_enabled:!0,custom_vpc:!1}),E({})}catch(e){console.error("Failed to create deployment:",e)}finally{S(!1)}}},U=(e,s)=>{R(t=>({...t,[e]:s})),I[e]&&E(s=>({...s,[e]:""}))},V=e=>{switch(e){case"aws":return"\uD83C\uDF29️";case"gcp":default:return"☁️";case"azure":return"\uD83D\uDD37"}},$=e=>{switch(e){case"development":return"bg-yellow-100 text-yellow-800";case"staging":return"bg-orange-100 text-orange-800";case"production":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsx)(m.Vq,{open:s,onOpenChange:t,children:(0,a.jsxs)(m.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsxs)(m.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-blue-500"}),"Create Smart Deployment"]}),(0,a.jsx)(m.Be,{children:"Configure your Terraform-based infrastructure deployment. Smart Deploy will analyze your project and select optimal cloud infrastructure templates."})]}),(0,a.jsxs)(o.mQ,{value:y,onValueChange:D,className:"w-full",children:[(0,a.jsxs)(o.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(o.SP,{value:"basic",children:"Basic Configuration"}),(0,a.jsx)(o.SP,{value:"infrastructure",children:"Infrastructure"}),(0,a.jsx)(o.SP,{value:"advanced",children:"Advanced Options"})]}),(0,a.jsx)(o.nU,{value:"basic",className:"space-y-6",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),"Project Details"]}),(0,a.jsx)(l.SZ,{children:"Basic information about your project and deployment"})]}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"project_name",children:"Project Name *"}),(0,a.jsx)(u.I,{id:"project_name",placeholder:"my-awesome-app",value:F.project_name,onChange:e=>U("project_name",e.target.value),className:I.project_name?"border-red-500":""}),I.project_name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:I.project_name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"environment",children:"Environment"}),(0,a.jsxs)(p.Ph,{value:F.environment,onValueChange:e=>U("environment",e),children:[(0,a.jsx)(p.i4,{children:(0,a.jsx)(p.ki,{})}),(0,a.jsxs)(p.Bw,{children:[(0,a.jsx)(p.Ql,{value:"development",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(i.C,{className:$("development"),children:"Development"})})}),(0,a.jsx)(p.Ql,{value:"staging",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(i.C,{className:$("staging"),children:"Staging"})})}),(0,a.jsx)(p.Ql,{value:"production",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(i.C,{className:$("production"),children:"Production"})})})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x._,{htmlFor:"framework_type",className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),"Framework Type"]}),(0,a.jsxs)(p.Ph,{value:F.framework_type,onValueChange:e=>U("framework_type",e),children:[(0,a.jsx)(p.i4,{children:(0,a.jsx)(p.ki,{})}),(0,a.jsxs)(p.Bw,{children:[(0,a.jsx)(p.Ql,{value:"auto-detect",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),"Auto-detect from repository"]})}),(0,a.jsx)(p.Ql,{value:"react",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v,{className:"h-4 w-4"}),"React SPA (→ CloudFront + S3)"]})}),(0,a.jsx)(p.Ql,{value:"static",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v,{className:"h-4 w-4"}),"Static Website (→ CloudFront + S3)"]})})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"auto-detect"===F.framework_type?"Framework will be detected from your GitHub repository":"☁️ Static/SPA frameworks deploy to CloudFront + S3"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x._,{htmlFor:"github_repo",className:"flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4"}),"GitHub Repository (Optional)"]}),(0,a.jsx)(u.I,{id:"github_repo",placeholder:"https://github.com/username/repository",value:F.github_repo,onChange:e=>U("github_repo",e.target.value),className:I.github_repo?"border-red-500":""}),I.github_repo&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:I.github_repo}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"If provided, Smart Deploy will analyze your repository for optimal infrastructure template selection"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x._,{htmlFor:"domain_name",className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),"Custom Domain (Optional)"]}),(0,a.jsx)(u.I,{id:"domain_name",placeholder:"myapp.com",value:F.domain_name,onChange:e=>U("domain_name",e.target.value),className:I.domain_name?"border-red-500":""}),I.domain_name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:I.domain_name})]})]})]})}),(0,a.jsxs)(o.nU,{value:"infrastructure",className:"space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(v,{className:"h-4 w-4"}),"Cloud Provider"]}),(0,a.jsx)(l.SZ,{children:"Choose your preferred cloud platform for deployment"})]}),(0,a.jsx)(l.aY,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Z.map(e=>(0,a.jsxs)("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${F.cloud_provider===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>U("cloud_provider",e.id),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:V(e.id)}),(0,a.jsx)("h3",{className:"font-medium",children:e.name})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.supported_features.slice(0,3).map(e=>(0,a.jsx)(i.C,{variant:"secondary",className:"text-xs",children:e.replace("_"," ")},e))})]},e.id))})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsx)(l.ll,{children:"Infrastructure Features"}),(0,a.jsx)(l.SZ,{children:"Configure the infrastructure components for your deployment"})]}),(0,a.jsx)(l.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsxs)(x._,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"SSL Certificate"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Enable HTTPS with automatic SSL"})]}),(0,a.jsx)(h.r,{checked:F.enable_ssl,onCheckedChange:e=>U("enable_ssl",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(x._,{children:"Content Delivery Network"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Global CDN for faster content delivery"})]}),(0,a.jsx)(h.r,{checked:F.enable_cdn,onCheckedChange:e=>U("enable_cdn",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsxs)(x._,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),"Monitoring"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Real-time application monitoring"})]}),(0,a.jsx)(h.r,{checked:F.enable_monitoring,onCheckedChange:e=>U("enable_monitoring",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsxs)(x._,{className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4"}),"Automated Backups"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Daily automated data backups"})]}),(0,a.jsx)(h.r,{checked:F.backup_enabled,onCheckedChange:e=>U("backup_enabled",e)})]})]})})]})]}),(0,a.jsx)(o.nU,{value:"advanced",className:"space-y-6",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsx)(l.ll,{children:"Advanced Configuration"}),(0,a.jsx)(l.SZ,{children:"Fine-tune your deployment with advanced options"})]}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"instance_type",children:"Instance Type"}),(0,a.jsxs)(p.Ph,{value:F.instance_type,onValueChange:e=>U("instance_type",e),children:[(0,a.jsx)(p.i4,{children:(0,a.jsx)(p.ki,{})}),(0,a.jsxs)(p.Bw,{children:[(0,a.jsx)(p.Ql,{value:"t3.micro",children:"t3.micro (1 vCPU, 1GB RAM) - $8/month"}),(0,a.jsx)(p.Ql,{value:"t3.small",children:"t3.small (2 vCPU, 2GB RAM) - $16/month"}),(0,a.jsx)(p.Ql,{value:"t3.medium",children:"t3.medium (2 vCPU, 4GB RAM) - $33/month"}),(0,a.jsx)(p.Ql,{value:"t3.large",children:"t3.large (2 vCPU, 8GB RAM) - $67/month"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(x._,{children:"Auto Scaling"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Automatically scale based on traffic"})]}),(0,a.jsx)(h.r,{checked:F.auto_scaling,onCheckedChange:e=>U("auto_scaling",e)})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(x._,{children:"Custom VPC"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Deploy in a custom Virtual Private Cloud"})]}),(0,a.jsx)(h.r,{checked:F.custom_vpc,onCheckedChange:e=>U("custom_vpc",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(x._,{children:"Auto Deploy"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Automatically deploy after infrastructure generation"})]}),(0,a.jsx)(h.r,{checked:F.auto_deploy,onCheckedChange:e=>U("auto_deploy",e)})]})]})]})]})})]}),(0,a.jsxs)(m.cN,{className:"flex gap-3",children:[(0,a.jsx)(n.z,{variant:"outline",onClick:t,disabled:C,children:"Cancel"}),(0,a.jsx)(n.z,{onClick:M,disabled:C,className:"min-w-[120px]",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Create Deployment"]})})]})]})})}function C(){let[e,s]=(0,r.useState)("auto-detect");return(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-white",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Framework Selector Test"}),(0,a.jsxs)("div",{className:"space-y-2 max-w-md",children:[(0,a.jsxs)(x._,{htmlFor:"framework_type",className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),"Framework Type"]}),(0,a.jsxs)(p.Ph,{value:e,onValueChange:s,children:[(0,a.jsx)(p.i4,{children:(0,a.jsx)(p.ki,{})}),(0,a.jsx)(p.Bw,{children:(0,a.jsx)(p.Ql,{value:"auto-detect",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),"Auto-detect from repository"]})})})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",e]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"auto-detect"===e?"Framework will be detected from your GitHub repository":"☁️ Static/SPA frameworks deploy to CloudFront + S3"})]})]})}var S=t(5613),Z=t(1723),A=t(3639),P=t(525),z=t(9376);function F(e){let{beforeAction:s="deploy",onCheckComplete:t}=e,[l,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[d,m]=(0,r.useState)(null),u=(0,z.useRouter)();(0,r.useEffect)(()=>{x()},[]);let x=async()=>{try{o(!0);let e=await fetch("http://localhost:8000/api/quota/check?plan=free",{method:"POST",credentials:"include"});if(e.ok){let s=await e.json();i(s),t?.(s.can_deploy,s.can_deploy?void 0:p(s))}else m("Failed to check quota limits"),t?.(!0)}catch(e){console.error("Quota check error:",e),m("Failed to check quota limits"),t?.(!0)}finally{o(!1)}},p=e=>e.checks.monthly.passed?e.checks.concurrent.passed?"Unknown quota limit reached":e.checks.concurrent.reason:e.checks.monthly.reason,h=()=>{u.push("/profile?tab=billing")};return c?(0,a.jsxs)(S.bZ,{children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)(S.X,{children:"Checking deployment limits..."})]}):d?(0,a.jsxs)(S.bZ,{variant:"destructive",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4"}),(0,a.jsx)(S.X,{children:"Warning: Could not verify quota limits. Proceeding may fail if limits are exceeded."})]}):l&&(!l.can_deploy||l.quota_status.monthly_runs.percentage>=80)?(0,a.jsxs)(S.bZ,{variant:l.can_deploy?"default":"destructive",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4"}),(0,a.jsx)(S.X,{children:(0,a.jsx)("div",{className:"space-y-3",children:l.can_deploy?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)("strong",{children:"⚠️ Quota Warning!"})}),(0,a.jsxs)("div",{className:"text-sm",children:["You've used ",l.quota_status.monthly_runs.percentage.toFixed(0),"% of your monthly deployments (",l.quota_status.monthly_runs.used,"/",l.quota_status.monthly_runs.limit,").","free"===l.quota_status.plan.tier&&" Consider upgrading to avoid interruptions."]}),"free"===l.quota_status.plan.tier&&(0,a.jsxs)(n.z,{size:"sm",variant:"outline",onClick:h,className:"w-full",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 mr-1"}),"View Upgrade Options"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsxs)("strong",{children:["\uD83D\uDEAB ",s.charAt(0).toUpperCase()+s.slice(1)," Blocked!"]})}),(0,a.jsx)("div",{className:"text-sm",children:p(l)}),!l.checks.monthly.passed&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Current plan: ",l.quota_status.plan.name,"(",l.quota_status.monthly_runs.used,"/",l.quota_status.monthly_runs.limit," deployments used)"]}),(0,a.jsx)(n.z,{size:"sm",onClick:h,className:"w-full",children:"\uD83D\uDE80 Upgrade for More Deployments"})]})]})})})]}):null}var R=t(2208),I=t(4401),E=t(7689),T=t(6076);let O=(0,y.Z)("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);var B=t(9397),M=t(6221);let U=e=>{let{deployment:s,onRefresh:t}=e;return(0,a.jsx)(l.Zb,{className:"mb-4 hover:shadow-md transition-shadow",children:(0,a.jsxs)(l.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:(e=>{switch(e){case"completed":return"✅";case"failed":return"❌";case"deploying":return"\uD83D\uDE80";case"analyzing":return"\uD83D\uDD0D";default:return"⏳"}})(s.status)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-lg",children:s.project_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[s.cloud_provider.toUpperCase()," • ",s.environment]})]})]}),(0,a.jsx)(i.C,{className:(e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"deploying":return"bg-blue-100 text-blue-800";case"analyzing":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(s.status),children:s.status})]}),"deploying"===s.status&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[s.progress,"%"]})]}),(0,a.jsx)(c.E,{value:s.progress,className:"h-2"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["ETA: ",s.estimated_completion]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s.deployment_url&&(0,a.jsx)(n.z,{size:"sm",onClick:()=>window.open(s.deployment_url,"_blank"),className:"flex items-center gap-1",children:"\uD83C\uDF10 View Site"}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:t,children:"\uD83D\uDD04 Refresh"})]})]})})},V=()=>{let[e,s]=(0,r.useState)("aws"),[t,n]=(0,r.useState)("static_site"),[c,o]=(0,r.useState)(null),[d,m]=(0,r.useState)(!1),u=[{id:"static_site",name:"Static Website",resources:["S3","CloudFront","Route53"]},{id:"spa",name:"Single Page App",resources:["EC2","ALB","CloudFront","RDS"]},{id:"api",name:"REST API",resources:["ECS","ALB","RDS","ElastiCache"]},{id:"fullstack",name:"Full-stack App",resources:["ECS","RDS","S3","CloudFront","ALB"]}],x=async()=>{m(!0);try{let s=await fetch("http://localhost:8000/api/v1/smart-deploy/infrastructure/preview",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||"demo-token"}`},body:JSON.stringify({cloud_provider:e,project_type:t})});if(s.ok){let e=await s.json();o(e)}else p()}catch(e){console.error("Failed to generate preview:",e),p()}finally{m(!1)}},p=()=>{let s=u.find(e=>e.id===t);o({cloud_provider:e,project_type:t,estimated_cost:100*Math.random()+20,resources:s?.resources.map((e,s)=>({id:`resource-${s}`,name:e,type:h(e),cost:30*Math.random()+5,status:"planned"}))||[]})},h=e=>({S3:"Storage",CloudFront:"CDN",Route53:"DNS",EC2:"Compute",ECS:"Container",ALB:"Load Balancer",RDS:"Database",ElastiCache:"Cache"})[e]||"Service",j=e=>({Storage:"\uD83D\uDCBE",CDN:"\uD83C\uDF10",DNS:"\uD83D\uDD17",Compute:"\uD83D\uDCBB",Container:"\uD83D\uDCE6","Load Balancer":"⚖️",Database:"\uD83D\uDDC4️",Cache:"⚡"})[e]||"\uD83D\uDD27";return(0,r.useEffect)(()=>{x()},[e,t]),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(R.Z,{className:"h-5 w-5 text-blue-500"}),"Infrastructure Preview"]}),(0,a.jsx)(l.SZ,{children:"AI-powered infrastructure recommendations for your project"})]}),(0,a.jsxs)(l.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Cloud Provider"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{id:"aws",name:"AWS",icon:"\uD83C\uDF29️",color:"bg-orange-100 text-orange-800"},{id:"gcp",name:"Google Cloud",icon:"☁️",color:"bg-blue-100 text-blue-800"},{id:"azure",name:"Azure",icon:"\uD83D\uDD37",color:"bg-blue-100 text-blue-800"}].map(t=>(0,a.jsxs)("button",{onClick:()=>s(t.id),className:`p-3 border rounded-lg text-center transition-all ${e===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:t.icon}),(0,a.jsx)("div",{className:"text-sm font-medium",children:t.name})]},t.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Project Type"}),(0,a.jsx)("div",{className:"space-y-2",children:u.map(e=>(0,a.jsxs)("button",{onClick:()=>n(e.id),className:`w-full p-3 border rounded-lg text-left transition-all ${t===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.resources.join(", ")})]},e.id))})]})]}),d?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(I.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-500"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Generating infrastructure preview..."})]}):c?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-lg",children:"Estimated Monthly Cost"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:["$",c.estimated_cost.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Provider"}),(0,a.jsx)("p",{className:"font-medium",children:e.toUpperCase()})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-lg mb-4",children:"Infrastructure Resources"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.resources.map(e=>(0,a.jsx)(l.Zb,{className:"hover:shadow-md transition-shadow",children:(0,a.jsx)(l.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:j(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.type}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)(i.C,{variant:"outline",children:e.status}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["$",e.cost.toFixed(2),"/month"]})]})]})]})})},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-lg mb-4",children:"Architecture Diagram"}),(0,a.jsxs)("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center space-x-4 flex-wrap",children:c.resources.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"text-xl mb-1",children:j(e.type)}),(0,a.jsx)("div",{className:"text-xs font-medium",children:e.name})]}),s<c.resources.length-1&&(0,a.jsx)("div",{className:"text-gray-400 mx-2",children:"→"})]},e.id))}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-4",children:"Interactive architecture diagram coming soon!"})]})]})]}):null]})]})})},$=e=>{let{deployments:s}=e,[t,n]=(0,r.useState)(""),[o,d]=(0,r.useState)("disconnected"),[m,u]=(0,r.useState)([]),x=(0,r.useRef)(null);(0,r.useEffect)(()=>(p(),()=>{x.current&&x.current.close()}),[]);let p=()=>{try{d("connecting"),x.current=new WebSocket(`${"http://localhost:8000".replace("https://","wss://").replace("http://","ws://")||0}/api/v1/smart-deploy/ws/realtime`),x.current.onopen=()=>{d("connected"),console.log("WebSocket connected")},x.current.onmessage=e=>{let s=JSON.parse(e.data);u(e=>[s,...e.slice(0,49)])},x.current.onerror=()=>{d("disconnected"),h()},x.current.onclose=()=>{d("disconnected"),setTimeout(p,5e3)}}catch(e){d("disconnected"),h()}},h=()=>{d("connected");let e=setInterval(()=>{let e={id:Date.now(),timestamp:new Date().toISOString(),deployment_id:s[0]?.id||"demo",event:"progress_update",message:"Infrastructure deployment in progress...",progress:Math.min(100,100*Math.random())};u(s=>[e,...s.slice(0,49)])},3e3);setTimeout(()=>clearInterval(e),3e4)};return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"h-5 w-5 text-blue-500"}),"Real-time Deployment Monitor"]}),(0,a.jsx)(l.SZ,{children:"Live updates from deployment processes"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:`h-2 w-2 rounded-full ${"connected"===o?"bg-green-500":"connecting"===o?"bg-yellow-500":"bg-red-500"}`}),(0,a.jsx)("span",{className:"text-sm capitalize",children:o})]})]})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium mb-4",children:["Active Deployments (",s.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:s.filter(e=>"completed"!==e.status).map(e=>(0,a.jsxs)("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${t===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>n(e.id),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.project_name}),(0,a.jsx)(i.C,{className:"text-xs",children:e.status})]}),(0,a.jsx)(c.E,{value:e.progress,className:"h-2"}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[e.cloud_provider.toUpperCase()," • ",e.progress,"%"]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-4",children:"Live Events"}),(0,a.jsx)("div",{className:"bg-gray-900 text-green-400 rounded-lg p-4 h-64 overflow-y-auto font-mono text-sm",children:0===m.length?(0,a.jsx)("p",{className:"text-gray-500",children:"Waiting for events..."}):m.map(e=>(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("span",{className:"text-gray-500",children:["[",new Date(e.timestamp).toLocaleTimeString(),"]"]}),(0,a.jsx)("span",{className:"ml-2",children:e.message}),e.progress&&(0,a.jsxs)("span",{className:"text-blue-400 ml-2",children:["(",Math.round(e.progress),"%)"]})]},e.id))})]})]})})]})})},Y=e=>{let{onUploadComplete:s}=e,[t,o]=(0,r.useState)("idle"),[d,m]=(0,r.useState)(0),[u,x]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1),j=async e=>{if(!e.name.endsWith(".zip")){alert("Please upload a ZIP file");return}o("uploading"),m(0);try{let s=setInterval(()=>{m(e=>Math.min(e+20,90))},500),t=new FormData;t.append("file",e);let a=await fetch("http://localhost:8000/api/v1/smart-deploy/upload-repository",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||"demo-token"}`},body:t});if(clearInterval(s),m(100),a.ok){o("analyzing");let e=await a.json();await f(e.temp_path)}else o("analyzing"),await g(e)}catch(s){console.error("Upload failed:",s),o("analyzing"),await g(e)}},g=async e=>{await new Promise(e=>setTimeout(e,3e3)),x({project_type:"spa",framework:y(e.name),languages:["TypeScript","JavaScript","CSS"],dependencies:["react","next.js","tailwindcss","typescript"],recommendations:["Use AWS CloudFront for global CDN","Enable automatic SSL with AWS Certificate Manager","Implement auto-scaling with Application Load Balancer","Add RDS for database with automated backups","Configure CloudWatch for monitoring and alerts"],estimated_resources:5,estimated_cost:47.5}),o("complete")},f=async e=>{try{let s=await fetch("http://localhost:8000/api/v1/smart-deploy/analyze-repository",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||"demo-token"}`},body:JSON.stringify({temp_path:e})});if(s.ok){let e=await s.json(),t=e.analysis||e;x(t),o("complete")}else throw Error("Analysis failed")}catch(e){await g(new File([],"fallback.zip"))}},y=e=>{let s=["React","Vue.js","Angular","Next.js","Nuxt.js"];return s[Math.floor(Math.random()*s.length)]};return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5 text-blue-500"}),"Repository Upload & Analysis"]}),(0,a.jsx)(l.SZ,{children:"Upload your project for AI-powered analysis and infrastructure recommendations"})]}),(0,a.jsxs)(l.aY,{children:["idle"===t&&(0,a.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${p?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:e=>{e.preventDefault(),h(!1);let s=Array.from(e.dataTransfer.files);s.length>0&&j(s[0])},onDragOver:e=>e.preventDefault(),onDragEnter:()=>h(!0),onDragLeave:()=>h(!1),children:[(0,a.jsx)(E.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Repository"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop your project ZIP file, or click to browse"}),(0,a.jsx)("input",{type:"file",accept:".zip",onChange:e=>{let s=e.target.files;s&&s.length>0&&j(s[0])},className:"hidden",id:"file-upload"}),(0,a.jsx)("label",{htmlFor:"file-upload",children:(0,a.jsx)(n.z,{variant:"outline",children:"Choose File"})}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-3",children:"Maximum file size: 100MB. ZIP files only."})]}),"uploading"===t&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(E.Z,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Uploading Repository..."}),(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsx)(c.E,{value:d,className:"h-3"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[d,"% complete"]})]})]}),"analyzing"===t&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(I.Z,{className:"h-12 w-12 text-purple-500 animate-spin mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Analyzing repository..."}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,a.jsx)("p",{children:"\uD83D\uDD0D Detecting project type and framework"}),(0,a.jsx)("p",{children:"\uD83D\uDCE6 Analyzing dependencies and architecture"}),(0,a.jsx)("p",{children:"☁️ Selecting optimal Terraform template"})]})]}),"complete"===t&&u&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600 mb-4",children:[(0,a.jsx)("span",{className:"text-2xl",children:"✅"}),(0,a.jsx)("span",{className:"text-lg font-medium",children:"Analysis Complete!"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-lg",children:"Project Analysis"})}),(0,a.jsxs)(l.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Framework"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:u.framework})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Project Type"}),(0,a.jsx)("p",{className:"text-lg font-semibold capitalize",children:u.project_type.replace("_"," ")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Languages"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:u.languages.map(e=>(0,a.jsx)(i.C,{variant:"secondary",children:e},e))})]})]})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-lg",children:"Infrastructure Plan"})}),(0,a.jsxs)(l.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Estimated Cost"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",u.estimated_cost,"/month"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Resources"}),(0,a.jsxs)("p",{className:"text-lg font-semibold",children:[u.estimated_resources," components"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Key Dependencies"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:u.dependencies.slice(0,4).map(e=>(0,a.jsx)(i.C,{variant:"outline",children:e},e))})]})]})]})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-lg",children:"AI Recommendations"})}),(0,a.jsx)(l.aY,{children:(0,a.jsx)("div",{className:"space-y-2",children:u.recommendations.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-500 mt-1",children:"✓"}),(0,a.jsx)("span",{className:"text-sm",children:e})]},s))})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(n.z,{onClick:()=>{s(),o("idle"),x(null),m(0)},className:"flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),"Create Smart Deployment"]}),(0,a.jsx)(n.z,{variant:"outline",onClick:()=>{o("idle"),x(null),m(0)},children:"Upload Different Project"})]})]})]})]})})};function q(){let[e,s]=(0,r.useState)([]),[t,c]=(0,r.useState)({total_deployments:0,active_deployments:0,successful_deployments:0,monthly_cost:0,ai_generations:0}),[m,u]=(0,r.useState)("overview"),[x,p]=(0,r.useState)(!1),[h,j]=(0,r.useState)(!0),[f,y]=(0,r.useState)(null),[N,b]=(0,r.useState)(!1),[w,_]=(0,r.useState)(null),{updateAuthToken:k}=(0,d.L_)(),S=(0,d.CX)(),Z=()=>{let e=localStorage.getItem("codeflowops_access_token")||"demo-token";return{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}};(0,r.useEffect)(()=>{A(),z()},[]);let A=async()=>{try{let e=await fetch("http://localhost:8000/api/v1/smart-deploy/deployments",{headers:Z()});if(e.ok){let t=await e.json();s(t.deployments||[])}else console.log("Backend not available, using demo data"),P()}catch(e){console.error("Failed to fetch deployments:",e),P()}finally{j(!1)}},P=()=>{s([{id:"deploy-1",project_name:"React E-commerce App",status:"completed",progress:100,cloud_provider:"aws",environment:"production",created_at:new Date().toISOString(),deployment_url:"https://my-app.example.com"},{id:"deploy-2",project_name:"Next.js Blog",status:"deploying",progress:65,cloud_provider:"gcp",environment:"staging",created_at:new Date(Date.now()-36e5).toISOString(),estimated_completion:"2 minutes"},{id:"deploy-3",project_name:"Vue.js Dashboard",status:"analyzing",progress:25,cloud_provider:"azure",environment:"development",created_at:new Date(Date.now()-72e5).toISOString(),estimated_completion:"5 minutes"}])},z=async()=>{try{let e=await fetch("http://localhost:8000/api/v1/smart-deploy/stats",{headers:Z()});if(e.ok){let s=await e.json();c(s)}else R()}catch(e){console.error("Failed to fetch stats:",e),R()}},R=()=>{c({total_deployments:12,active_deployments:3,successful_deployments:9,monthly_cost:127.45,ai_generations:45}),P()},E=e=>{let t=setInterval(async()=>{try{let a=await fetch(`http://localhost:8000/api/v1/smart-deploy/status/${e}`,{headers:Z()});if(a.ok){let r=await a.json();s(s=>s.map(s=>s.id===e?{...s,status:r.status,progress:r.progress,message:r.message}:s)),("completed"===r.status||"failed"===r.status)&&clearInterval(t)}}catch(e){console.error("Error polling deployment status:",e)}},3e3);setTimeout(()=>clearInterval(t),6e5)},q=async e=>{console.log("\uD83D\uDE80 Starting deployment creation with data:",e),console.log("\uD83D\uDD0D Framework information:",{framework:e.framework,framework_type:e.framework_type,project_type:e.project_type,analysis_result:e.analysis_result});try{let t={project_name:e.project_name,cloud_provider:e.cloud_provider||"aws",environment:e.environment||"production",domain_name:e.domain_name||"",github_repo:e.github_repo||"",auto_deploy:e.auto_deploy||!1,framework:e.framework,framework_type:e.framework_type,project_type:e.project_type,analysis_result:e.analysis_result};console.log("\uD83D\uDCDD Formatted deployment request:",t),console.log("\uD83D\uDD17 Making API call to create deployment...");let a=await S.createDeployment(t);console.log("✅ Deployment created successfully:",a);let r={id:a.deployment_id,project_name:e.project_name||"Demo Project",status:a.status||"analyzing",progress:5,cloud_provider:e.cloud_provider||"aws",environment:e.environment||"production",created_at:new Date().toISOString(),estimated_completion:"5 minutes",message:a.message,terraform_template:!0};console.log("\uD83D\uDCCA Adding deployment to UI:",r),s(e=>[r,...e]),p(!1),console.log("\uD83C\uDFAF Switching to monitor tab and selecting deployment"),u("monitor"),y(a.deployment_id),E(a.deployment_id),console.log("\uD83C\uDF89 Deployment creation process completed successfully!")}catch(s){console.error("❌ Failed to create deployment:",s),console.error("Error details:",{message:s.message,stack:s.stack,response:s.response?.data});let e=s.message||s.toString();alert(`Error creating deployment: ${e}

Check the browser console for more details.`)}};return h?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(I.Z,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-blue-500"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Loading Smart Deploy Dashboard..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)(T.Z,{className:"h-8 w-8 text-blue-500"}),"Smart Deploy",(0,a.jsxs)(i.C,{className:"ml-2 bg-green-100 text-green-800",children:[(0,a.jsx)(O,{className:"h-3 w-3 mr-1"}),"Terraform Ready"]})]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Traditional Terraform-based infrastructure deployment"})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)(n.z,{variant:"outline",onClick:()=>p(!0),className:"flex items-center gap-2",children:[(0,a.jsx)(B.Z,{className:"h-4 w-4"}),"New Deployment"]})})]})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(F,{beforeAction:"deploy"})}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(C,{})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Deployments"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.total_deployments})]}),(0,a.jsx)(O,{className:"h-8 w-8 text-blue-500"})]})})}),(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:t.active_deployments})]}),(0,a.jsx)(I.Z,{className:"h-8 w-8 text-orange-500"})]})})}),(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Successful"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:t.successful_deployments})]}),(0,a.jsx)(v,{className:"h-8 w-8 text-green-500"})]})})}),(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Cost"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["$",t.monthly_cost]})]}),(0,a.jsx)(M.Z,{className:"h-8 w-8 text-purple-500"})]})})}),(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"AI Generations"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:t.ai_generations})]}),(0,a.jsx)(g.Z,{className:"h-8 w-8 text-indigo-500"})]})})})]}),(0,a.jsxs)(o.mQ,{value:m,onValueChange:u,className:"space-y-6",children:[(0,a.jsxs)(o.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(o.SP,{value:"overview",children:"Overview"}),(0,a.jsx)(o.SP,{value:"monitor",children:"Real-time Monitor"}),(0,a.jsx)(o.SP,{value:"preview",children:"Infrastructure Preview"}),(0,a.jsx)(o.SP,{value:"upload",children:"Repository Upload"})]}),(0,a.jsx)(o.nU,{value:"overview",className:"space-y-6",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsx)(l.ll,{children:"Recent Deployments"}),(0,a.jsx)(l.SZ,{children:"Your latest Smart Deploy infrastructure deployments"})]}),(0,a.jsx)(l.aY,{children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(T.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No deployments yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first Smart Deployment"}),(0,a.jsxs)(n.z,{onClick:()=>p(!0),children:[(0,a.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Create Deployment"]})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)(U,{deployment:e,onRefresh:A},e.id))})})]})}),(0,a.jsx)(o.nU,{value:"monitor",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)($,{deployments:e}),N&&(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"h-5 w-5"}),"Integration Test"]}),(0,a.jsx)(l.SZ,{children:"Test the complete deployment workflow end-to-end"})]}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)(n.z,{onClick:async()=>{try{let e=await S.checkHealth();console.log("Health check result:",e),alert(`Integration test completed! Backend is ${"healthy"===e.status?"healthy":"not responding"}`)}catch(e){console.error("Integration test failed:",e),alert("Integration test failed. Check console for details.")}},className:"flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),"Run Full Integration Test"]})})]})]})}),(0,a.jsx)(o.nU,{value:"preview",children:(0,a.jsx)(V,{})}),(0,a.jsx)(o.nU,{value:"upload",children:(0,a.jsx)(Y,{onUploadComplete:A})})]}),(0,a.jsx)(D,{isOpen:x,onClose:()=>p(!1),onSubmit:q,analysisResult:w})]})})}function L(){return(0,a.jsx)(q,{})}},5613:function(e,s,t){"use strict";t.d(s,{X:function(){return o},bZ:function(){return c}});var a=t(7437),r=t(2265),l=t(535),n=t(4508);let i=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,...l}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:r}),t),...l})});c.displayName="Alert",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})}).displayName="AlertTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",t),...r})});o.displayName="AlertDescription"},6110:function(e,s,t){"use strict";t.d(s,{$N:function(){return h},Be:function(){return j},Vq:function(){return c},cN:function(){return p},cZ:function(){return u},fK:function(){return x},hg:function(){return o}});var a=t(7437),r=t(2265),l=t(9027),n=t(2489),i=t(4508);let c=l.fC,o=l.xz,d=l.h_;l.x8;let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.aV,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});m.displayName=l.aV.displayName;let u=r.forwardRef((e,s)=>{let{className:t,children:r,...c}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.VY,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[r,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.VY.displayName;let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};x.displayName="DialogHeader";let p=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};p.displayName="DialogFooter";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.Dx,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});h.displayName=l.Dx.displayName;let j=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.dk,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});j.displayName=l.dk.displayName},1828:function(e,s,t){"use strict";t.d(s,{r:function(){return i}});var a=t(7437),r=t(2265),l=t(721),n=t(4508);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(l.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=l.fC.displayName},2339:function(e,s,t){"use strict";t.d(s,{SP:function(){return o},dr:function(){return c},mQ:function(){return i},nU:function(){return d}});var a=t(7437),r=t(2265),l=t(271),n=t(4508);let i=l.fC,c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.aV,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});c.displayName=l.aV.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});o.displayName=l.xz.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});d.displayName=l.VY.displayName},6221:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},91:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},9397:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6137:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},721:function(e,s,t){"use strict";t.d(s,{bU:function(){return w},fC:function(){return b}});var a=t(2265),r=t(6741),l=t(8575),n=t(3966),i=t(886),c=t(6718),o=t(420),d=t(6840),m=t(7437),u="Switch",[x,p]=(0,n.b)(u),[h,j]=x(u),g=a.forwardRef((e,s)=>{let{__scopeSwitch:t,name:n,checked:c,defaultChecked:o,required:x,disabled:p,value:j="on",onCheckedChange:g,form:f,...y}=e,[b,w]=a.useState(null),_=(0,l.e)(s,e=>w(e)),k=a.useRef(!1),D=!b||f||!!b.closest("form"),[C,S]=(0,i.T)({prop:c,defaultProp:o??!1,onChange:g,caller:u});return(0,m.jsxs)(h,{scope:t,checked:C,disabled:p,children:[(0,m.jsx)(d.WV.button,{type:"button",role:"switch","aria-checked":C,"aria-required":x,"data-state":N(C),"data-disabled":p?"":void 0,disabled:p,value:j,...y,ref:_,onClick:(0,r.M)(e.onClick,e=>{S(e=>!e),D&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),D&&(0,m.jsx)(v,{control:b,bubbles:!k.current,name:n,value:j,checked:C,required:x,disabled:p,form:f,style:{transform:"translateX(-100%)"}})]})});g.displayName=u;var f="SwitchThumb",y=a.forwardRef((e,s)=>{let{__scopeSwitch:t,...a}=e,r=j(f,t);return(0,m.jsx)(d.WV.span,{"data-state":N(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:s})});y.displayName=f;var v=a.forwardRef((e,s)=>{let{__scopeSwitch:t,control:r,checked:n,bubbles:i=!0,...d}=e,u=a.useRef(null),x=(0,l.e)(u,s),p=(0,c.D)(n),h=(0,o.t)(r);return a.useEffect(()=>{let e=u.current;if(!e)return;let s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==n&&s){let t=new Event("click",{bubbles:i});s.call(e,n),e.dispatchEvent(t)}},[p,n,i]),(0,m.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...d,tabIndex:-1,ref:x,style:{...d.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function N(e){return e?"checked":"unchecked"}v.displayName="SwitchBubbleInput";var b=g,w=y}},function(e){e.O(0,[583,343,696,566,752,379,971,117,744],function(){return e(e.s=228)}),_N_E=e.O()}]);
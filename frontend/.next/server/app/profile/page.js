(()=>{var e={};e.id=178,e.ids=[178],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1060:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),a(4591),a(3676),a(5866);var t=a(3191),r=a(8716),l=a(7922),i=a.n(l),n=a(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4591)),"C:\\ClayDesk.AI\\codeflowops-saas\\frontend\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3676)),"C:\\ClayDesk.AI\\codeflowops-saas\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\ClayDesk.AI\\codeflowops-saas\\frontend\\app\\profile\\page.tsx"],m="/profile/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6045:(e,s,a)=>{Promise.resolve().then(a.bind(a,1869))},1869:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ee});var t=a(326),r=a(7577),l=a(5047),i=a(1813),n=a(3574),c=a(4571),d=a(2643),o=a(772),m=a(4432),x=a(1048),u=a(567),h=a(5290);function p({currentPlan:e="free"}){let[s,a]=(0,r.useState)(null),{isAuthenticated:l,loading:n}=function(){let{user:e,isAuthenticated:s,loading:a}=(0,i.aC)();return{user:e,isAuthenticated:s,loading:a,isGuest:!a&&!s,isLoggedIn:!a&&s}}(),{createSubscription:m}=(0,c._)({onSuccess:e=>{e.checkout_url&&(window.location.href=e.checkout_url)},onError:e=>{console.error("Subscription creation failed:",e),a(null)}}),x=e=>0===e?"Free":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e/100),u=r=>{let i=e===r.tier,c="free"===r.tier?"Get Started Free":"enterprise"===r.tier?"Contact Sales":r.trial_days&&r.trial_days>0?`Start ${r.trial_days}-Day Trial`:"Get Started";if(i)return t.jsx(o.z,{variant:"secondary",className:"w-full",disabled:!0,children:"Current Plan"});if("free"===r.tier)return t.jsx(o.z,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/register?plan=free",children:c});if("enterprise"===r.tier)return t.jsx(o.z,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/contact?plan=enterprise",children:c});let d=async()=>{if(!l){let e=`/register?plan=${r.tier}&trial=${r.trial_days||0}&redirect=deploy`;window.location.href=e;return}a(r.tier),await m({planTier:r.tier,trialDays:r.trial_days})};return t.jsx(o.z,{className:"w-full",onClick:d,disabled:s===r.tier||n,children:s===r.tier?(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):n?(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):c})};return(0,t.jsxs)("div",{className:"py-8",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Choose Your Plan"}),t.jsx("p",{className:"text-lg text-muted-foreground",children:"Scale your development workflow with our flexible pricing"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{tier:"free",name:"Free",price_monthly:0,description:"Perfect for personal projects",features:["3 projects","Public repositories","Basic AWS infrastructure","Standard build times","Community support"],max_projects:3,popular:!1},{tier:"starter",name:"Starter",price_monthly:1900,description:"Great for freelancers and small teams",features:["10 projects","Private repositories","Custom domains with SSL","Fast build times","Email support","API access"],max_projects:10,popular:!0,trial_days:14},{tier:"pro",name:"Pro",price_monthly:4900,description:"For professional teams with advanced needs",features:["Unlimited projects","Priority support","Advanced analytics","Team collaboration (10 members)","Deployment previews"],max_projects:-1,popular:!1,trial_days:7},{tier:"enterprise",name:"Enterprise",price_monthly:0,description:"For large teams and organizations",features:["Everything in Pro","Unlimited team members","White-label solution","Dedicated support","Custom integrations"],max_projects:-1,popular:!1}].map(e=>(0,t.jsxs)(d.Zb,{className:`relative ${e.popular?"border-primary shadow-lg scale-105":""}`,children:[e.popular&&t.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:t.jsx("span",{className:"bg-primary text-primary-foreground px-3 py-1 rounded-full text-sm font-medium",children:"Most Popular"})}),(0,t.jsxs)(d.Ol,{className:"text-center",children:[t.jsx(d.ll,{className:"text-xl mb-2",children:e.name}),(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("span",{className:"text-4xl font-bold",children:x(e.price_monthly)}),e.price_monthly>0&&t.jsx("span",{className:"text-muted-foreground",children:"/month"})]}),t.jsx(d.SZ,{children:e.description})]}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[t.jsx("ul",{className:"space-y-2 mb-6",children:e.features.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-center text-sm",children:[t.jsx("span",{className:"mr-2 text-primary",children:"✓"}),e]},s))}),u(e),e.trial_days&&e.trial_days>0&&(0,t.jsxs)("p",{className:"text-xs text-center text-muted-foreground",children:[e.trial_days,"-day free trial • Cancel anytime"]})]})]},e.tier))}),t.jsx("div",{className:"mt-12 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["All plans include our core deployment features.",t.jsx("br",{}),"Need something custom? ",t.jsx("a",{href:"/contact",className:"text-primary hover:underline",children:"Contact us"})]})})]})}var f=a(2288),j=a(8916),y=a(1821),g=a(7358),N=a(2714),v=a(1540);function w({onFetchBillingHistory:e,children:s}){let[a,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)([]),[c,m]=(0,r.useState)(!1),[x,p]=(0,r.useState)(null),w=async()=>{l(!0),m(!0),p(null);try{let s=await e();n(s)}catch(e){p("Failed to load billing history"),console.error("Error fetching billing history:",e)}finally{m(!1)}},b=(e,s)=>new Intl.NumberFormat("en-US",{style:"currency",currency:s.toUpperCase()}).format(e/100),k=e=>new Date(1e3*e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),_=e=>{let s={paid:{variant:"default",label:"Paid"},open:{variant:"secondary",label:"Open"},void:{variant:"destructive",label:"Void"},draft:{variant:"outline",label:"Draft"}}[e]||{variant:"outline",label:e};return t.jsx(u.C,{variant:s.variant,children:s.label})};return(0,t.jsxs)(f.Vq,{open:a,onOpenChange:l,children:[t.jsx(f.hg,{asChild:!0,onClick:w,children:s}),(0,t.jsxs)(f.cZ,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsxs)(f.$N,{className:"flex items-center gap-2",children:[t.jsx(j.Z,{className:"h-5 w-5"}),"Billing History"]}),t.jsx(f.Be,{children:"View and download your past invoices and payment history"})]}),t.jsx("div",{className:"flex-1 overflow-auto",children:c?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[t.jsx(h.Z,{className:"h-6 w-6 animate-spin mr-2"}),t.jsx("span",{children:"Loading billing history..."})]}):x?(0,t.jsxs)("div",{className:"text-center py-8 text-red-600",children:[t.jsx("p",{children:x}),t.jsx(o.z,{variant:"outline",onClick:w,className:"mt-4",children:"Try Again"})]}):0===i.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(j.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No billing history found"}),t.jsx("p",{className:"text-sm",children:"Your invoices will appear here after your first payment"})]}):t.jsx("div",{className:"space-y-4",children:i.map(e=>t.jsx(d.Zb,{className:"hover:shadow-md transition-shadow",children:t.jsx(d.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:"font-medium",children:e.number||`Invoice ${e.id.slice(-8)}`}),_(e.status)]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(y.Z,{className:"h-3 w-3"}),t.jsx("span",{children:b(e.amount_paid,e.currency)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(g.Z,{className:"h-3 w-3"}),t.jsx("span",{children:k(e.created)})]})]}),e.description&&t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Period: ",k(e.period_start)," - ",k(e.period_end)]})]}),(0,t.jsxs)("div",{className:"flex gap-2 ml-4",children:[e.hosted_invoice_url&&(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(e.hosted_invoice_url,"_blank"),children:[t.jsx(N.Z,{className:"h-3 w-3 mr-1"}),"View"]}),e.invoice_pdf&&(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(e.invoice_pdf,"_blank"),children:[t.jsx(v.Z,{className:"h-3 w-3 mr-1"}),"PDF"]})]})]})})},e.id))})})]})]})}var b=a(64),k=a(3273),_=a(6697),Z=a(7202),C=a(4659),S=a(8998),P=a(3634),D=a(7069);function z({onUpgrade:e}){let[s,a]=(0,r.useState)(null),[l,i]=(0,r.useState)(!0),[n,c]=(0,r.useState)(null),m=e=>e>=90?"text-red-600":e>=70?"text-yellow-600":"text-green-600";return l?(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex items-center space-x-2",children:[t.jsx(_.Z,{className:"h-5 w-5"}),t.jsx("span",{children:"Usage & Limits"})]})}),t.jsx(d.aY,{children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-2 bg-gray-200 rounded"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})]}):n||!s?(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex items-center space-x-2",children:[t.jsx(_.Z,{className:"h-5 w-5"}),t.jsx("span",{children:"Usage & Limits"})]})}),t.jsx(d.aY,{children:(0,t.jsxs)(k.bZ,{variant:"destructive",children:[t.jsx(Z.Z,{className:"h-4 w-4"}),t.jsx(k.X,{children:n||"Failed to load quota information"})]})})]}):(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(_.Z,{className:"h-5 w-5"}),t.jsx("span",{children:"Usage & Limits"})]}),t.jsx(u.C,{variant:"outline",className:"capitalize",children:s.plan.name})]}),t.jsx(d.SZ,{children:"Track your deployment usage and plan limits"})]}),(0,t.jsxs)(d.aY,{className:"space-y-6",children:[s.deployment_allowed.can_deploy?s.monthly_runs.percentage>=80?(0,t.jsxs)(k.bZ,{variant:"destructive",children:[t.jsx(Z.Z,{className:"h-4 w-4"}),t.jsx(k.X,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("div",{children:t.jsx("strong",{children:"⚠️ Quota Warning!"})}),(0,t.jsxs)("div",{className:"text-sm",children:["You've used ",s.monthly_runs.percentage.toFixed(0),"% of your monthly deployments. Consider upgrading to avoid service interruption."]}),t.jsx(o.z,{size:"sm",variant:"outline",className:"mt-2 w-full",onClick:e,children:"View Upgrade Options"})]})})]}):(0,t.jsxs)(k.bZ,{children:[t.jsx(C.Z,{className:"h-4 w-4"}),(0,t.jsxs)(k.X,{children:[t.jsx("strong",{children:"✅ Ready to deploy!"})," All quota limits are within acceptable range."]})]}):(0,t.jsxs)(k.bZ,{variant:"destructive",children:[t.jsx(Z.Z,{className:"h-4 w-4"}),t.jsx(k.X,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("div",{children:t.jsx("strong",{children:"⚠️ Deployments Blocked!"})}),t.jsx("div",{className:"text-sm",children:s.deployment_allowed.monthly_check.passed?`⚡ ${s.deployment_allowed.concurrent_check.reason}`:`📅 ${s.deployment_allowed.monthly_check.reason}`}),!s.deployment_allowed.monthly_check.passed&&t.jsx(o.z,{size:"sm",className:"mt-2 w-full",onClick:e,children:"\uD83D\uDE80 Upgrade for More Deployments"})]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(S.Z,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:"font-medium",children:"Monthly Deployments"})]}),t.jsx("span",{className:`text-sm font-medium ${m(s.monthly_runs.percentage)}`,children:s.monthly_runs.unlimited?`${s.monthly_runs.used} used`:`${s.monthly_runs.used} / ${s.monthly_runs.limit}`})]}),!s.monthly_runs.unlimited&&t.jsx(b.E,{value:s.monthly_runs.percentage,className:"h-2"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[t.jsx("span",{children:s.monthly_runs.unlimited?"Unlimited deployments":`${s.monthly_runs.remaining} remaining this month`}),!s.monthly_runs.unlimited&&(0,t.jsxs)("span",{className:m(s.monthly_runs.percentage),children:[s.monthly_runs.percentage.toFixed(1),"%"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(P.Z,{className:"h-4 w-4 text-purple-600"}),t.jsx("span",{className:"font-medium",children:"Concurrent Deployments"})]}),(0,t.jsxs)("span",{className:`text-sm font-medium ${m(s.concurrent_runs.percentage)}`,children:[s.concurrent_runs.active," / ",s.concurrent_runs.limit]})]}),t.jsx(b.E,{value:s.concurrent_runs.percentage,className:"h-2"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,t.jsxs)("span",{children:[s.concurrent_runs.remaining," slots available"]}),(0,t.jsxs)("span",{className:m(s.concurrent_runs.percentage),children:[s.concurrent_runs.percentage.toFixed(1),"%"]})]})]}),t.jsx("div",{className:"pt-4 border-t space-y-3",children:s.upgrade_suggestion?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(D.Z,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:"text-sm font-medium",children:"\uD83D\uDCA1 Recommendation"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:s.upgrade_suggestion}),t.jsx(o.z,{size:"sm",onClick:e,className:"w-full",children:"\uD83D\uDE80 Upgrade Now"})]}):"free"===s.plan.tier&&s.monthly_runs.percentage>=50?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(D.Z,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:"text-sm font-medium",children:"\uD83D\uDCA1 Growing Fast?"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["You're already at ",s.monthly_runs.percentage.toFixed(0),"% usage. Starter plan gives you 50 deployments/month + 14-day free trial!"]}),t.jsx(o.z,{size:"sm",onClick:e,className:"w-full",children:"\uD83C\uDFAF Try Starter Free for 14 Days"})]}):"starter"===s.plan.tier&&s.monthly_runs.percentage>=60?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(D.Z,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:"text-sm font-medium",children:"\uD83D\uDE80 Power User?"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Pro plan offers 200 deployments/month + 5 concurrent deployments for teams."}),t.jsx(o.z,{size:"sm",onClick:e,className:"w-full",children:"⚡ Upgrade to Pro"})]}):t.jsx("div",{className:"text-center py-2",children:t.jsx(o.z,{size:"sm",variant:"outline",onClick:e,className:"w-full",children:"\uD83D\uDCCA View All Plans"})})})]})]})}var A=a(9210),F=a(8758),U=a(6557);let E=(0,U.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var $=a(165);let M=(0,U.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var R=a(4019),I=a(4014);let Y=(0,U.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),O=(0,U.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var T=a(2893),q=a(9635),L=a(3685);let V=(0,U.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),H=(0,U.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var G=a(5932),B=a(8378);let X=(0,U.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var Q=a(850),W=a(2607);function J(){(0,l.useSearchParams)();let{user:e,isAuthenticated:s,fetchUserProfile:a,updateUserProfile:n,fetchUserDeployments:f,clearDeploymentHistory:y,profilePicture:N,updateProfilePicture:v,removeProfilePicture:b}=(0,i.aC)(),{createSubscription:_,cancelSubscription:Z,loading:P}=(0,c._)({onSuccess:e=>{e.client_secret?window.location.href=`/checkout?client_secret=${e.client_secret}`:window.location.reload()},onError:e=>{alert(`Payment operation failed: ${e}`)}}),[D,U]=(0,r.useState)(!0),[Q,W]=(0,r.useState)(!1),[J,ee]=(0,r.useState)([]),[es,ea]=(0,r.useState)(null),[et,er]=(0,r.useState)({full_name:e?.full_name||"",email:e?.email||""}),[el,ei]=(0,r.useState)(!1),[en,ec]=(0,r.useState)("overview"),ed=async()=>{try{await _({planTier:"pro",trialDays:14,pricingContext:{source:"profile_upgrade",current_plan:es?.plan}})}catch(e){console.error("Upgrade failed:",e)}},eo=async()=>{try{let e=localStorage.getItem("codeflowops_access_token"),s=await fetch("https://api.codeflowops.com/api/v1/payments/customer-portal",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){let{url:e}=await s.json();window.location.href=e}else alert("Unable to access payment management. Please try again.")}catch(e){console.error("Payment method management failed:",e),alert("Unable to access payment management. Please try again.")}},em=async()=>{let e=localStorage.getItem("codeflowops_access_token"),s=await fetch("https://api.codeflowops.com/api/v1/payments/billing-history",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw Error("Failed to fetch billing history");return(await s.json()).invoices||[]},ex=async()=>{if(!es?.plan||"free"===es.plan){alert("No active subscription to cancel.");return}if(confirm("Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period."))try{let e=localStorage.getItem("codeflowops_access_token"),s=await fetch("https://api.codeflowops.com/api/v1/payments/cancel-subscription",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({subscription_id:es.id||"current",at_period_end:!0})});if(s.ok)alert("Subscription cancelled successfully. You will retain access until the end of your billing period."),window.location.reload();else{let e=await s.json();alert(`Failed to cancel subscription: ${e.detail||"Unknown error"}`)}}catch(e){console.error("Subscription cancellation failed:",e),alert("Failed to cancel subscription. Please contact support.")}},eu=async()=>{try{U(!0),await n(et),W(!1)}catch(e){console.error("Error updating profile:",e)}finally{U(!1)}},eh=e=>{switch(e){case"success":return t.jsx(C.Z,{className:"h-4 w-4 text-green-500"});case"failed":return t.jsx(E,{className:"h-4 w-4 text-red-500"});case"building":case"pending":return t.jsx(S.Z,{className:"h-4 w-4 text-yellow-500"});default:return t.jsx(S.Z,{className:"h-4 w-4 text-gray-500"})}},ep=e=>t.jsx(u.C,{children:e.charAt(0).toUpperCase()+e.slice(1)}),ef=e=>t.jsx(u.C,{children:e.toUpperCase()}),ej=()=>{let e=new Date;return e.setDate(e.getDate()-7),J.filter(s=>{let a=s.createdAt||s.created_at;return!!a&&new Date(a)>=e})},ey=async()=>{try{U(!0),await y();try{let e=await f();e?.deployments?ee(e.deployments):ee([])}catch(e){console.warn("Failed to refetch deployments after clear, setting to empty:",e),ee([])}console.log("Deployment history cleared successfully")}catch(e){console.error("Error clearing deployment history:",e),console.warn("Failed to clear deployment history")}finally{U(!1)}},eg=async e=>{let s=e.target.files?.[0];if(s)try{ei(!0),await v(s),console.log("Profile picture uploaded successfully")}catch(e){console.error("Error uploading profile picture:",e),alert(e instanceof Error?e.message:"Failed to upload profile picture. Please try again.")}finally{ei(!1)}},eN=()=>{b(),console.log("Profile picture removed successfully")};if(!s)return t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx(d.Zb,{className:"w-full max-w-md",children:t.jsx(d.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx($.Z,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Authentication Required"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"Please sign in to view your profile."}),t.jsx(o.z,{asChild:!0,children:t.jsx("a",{href:"/login",children:"Sign In"})})]})})})});let ev=e?.full_name?e.full_name.split(" ").map(e=>e[0]).join("").toUpperCase():e?.email?.charAt(0).toUpperCase()||"U";return t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsx("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)(F.qE,{className:"h-16 w-16",children:[N?t.jsx(F.F$,{src:N,alt:"Profile picture",className:"avatar-image"}):null,t.jsx(F.Q5,{className:"bg-primary text-primary-foreground text-lg",children:ev})]}),t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:(0,t.jsxs)("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer",children:[t.jsx(M,{className:"h-6 w-6 text-white"}),t.jsx("input",{id:"profile-picture-upload",type:"file",accept:"image/*",onChange:eg,className:"hidden",disabled:el})]})}),el&&t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:t.jsx(h.Z,{className:"h-6 w-6 text-white animate-spin"})})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:e?.full_name||"User Profile"}),N&&(0,t.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:eN,className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-950",children:[t.jsx(R.Z,{className:"h-4 w-4 mr-1"}),"Remove Photo"]})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e?.email}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Hover over avatar to change profile picture"})]})]})}),(0,t.jsxs)(A.mQ,{value:en,onValueChange:ec,className:"space-y-6",children:[(0,t.jsxs)(A.dr,{className:"grid w-full grid-cols-5",children:[t.jsx(A.SP,{value:"overview",children:"Overview"}),t.jsx(A.SP,{value:"deployments",children:"Deployments"}),t.jsx(A.SP,{value:"subscription",children:"Subscription"}),t.jsx(A.SP,{value:"settings",children:"Settings"}),t.jsx(A.SP,{value:"debug",children:"Debug"})]}),(0,t.jsxs)(A.nU,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(d.Zb,{children:t.jsx(d.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Deployments"}),t.jsx("p",{className:"text-2xl font-bold",children:J.length})]}),t.jsx(I.Z,{className:"h-8 w-8 text-muted-foreground"})]})})}),t.jsx(d.Zb,{children:t.jsx(d.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Successful Deployments"}),t.jsx("p",{className:"text-2xl font-bold",children:J.filter(e=>"success"===e.status).length})]}),t.jsx(C.Z,{className:"h-8 w-8 text-green-500"})]})})}),t.jsx(d.Zb,{children:t.jsx(d.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Current Plan"}),(0,t.jsxs)("p",{className:"text-xl font-bold flex items-center gap-2",children:[es?.plan.toUpperCase(),ef(es?.plan||"trial")]})]}),t.jsx(j.Z,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(Y,{className:"h-5 w-5"}),"Recent Deployments"]}),t.jsx(d.SZ,{children:"Your latest deployment activity"})]}),t.jsx(d.aY,{children:D?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(h.Z,{className:"h-8 w-8 animate-spin"})}):0===J.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx(I.Z,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("p",{className:"text-muted-foreground",children:"No deployments yet"})]}):t.jsx("div",{className:"space-y-4",children:J.slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[eh(e.status),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:e.name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:e.repository})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(u.C,{children:e.technology}),ep(e.status),t.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt||e.created_at||"").toLocaleDateString()})]})]},e.id))})})]})]}),t.jsx(A.nU,{value:"deployments",className:"space-y-6",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(I.Z,{className:"h-5 w-5"}),"Recent Deployments"]}),t.jsx(d.SZ,{children:"Deployment history from the last 7 days"})]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:ey,disabled:D||0===ej().length,className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-950",children:[t.jsx(O,{className:"h-4 w-4 mr-2"}),"Clear History"]})]}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)(k.bZ,{className:"mb-4 bg-blue-50 border-blue-200",children:[t.jsx(Y,{className:"h-4 w-4"}),(0,t.jsxs)(k.X,{className:"text-blue-700",children:[t.jsx("strong",{children:"Note:"})," Deployment history is automatically deleted after 7 days for security and storage optimization."]})]}),D?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(h.Z,{className:"h-8 w-8 animate-spin"})}):0===ej().length?(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx(Y,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Recent Deployments"}),t.jsx("p",{className:"text-muted-foreground",children:"You haven't deployed anything in the last 7 days."})]}):t.jsx("div",{className:"space-y-4",children:ej().map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[eh(e.status),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[t.jsx(T.Z,{className:"h-3 w-3"}),t.jsx("span",{children:e.repository})]}),e.url&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[t.jsx(I.Z,{className:"h-3 w-3"}),t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:e.url})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(u.C,{children:e.technology}),ep(e.status),(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt||e.created_at||"").toLocaleDateString()}),t.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt||e.created_at||"").toLocaleTimeString()})]})]})]},e.id))})]})]})}),(0,t.jsxs)(A.nU,{value:"subscription",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(j.Z,{className:"h-5 w-5"}),"Current Plan"]})}),t.jsx(d.aY,{className:"space-y-4",children:es&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:"Plan:"}),ef(es.plan)]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:"Status:"}),t.jsx(u.C,{children:es.status.toUpperCase()})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:"Deployments:"}),(0,t.jsxs)("span",{children:[es.deployments.used," / ",es.deployments.limit]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${es.deployments.used/es.deployments.limit*100}%`}})}),"trial"===es.plan&&(0,t.jsxs)(k.bZ,{children:[t.jsx(g.Z,{className:"h-4 w-4"}),(0,t.jsxs)(k.X,{children:["Your trial expires on ",es.currentPeriodEnd?new Date(es.currentPeriodEnd).toLocaleDateString():"N/A"]})]})]})})]}),t.jsx(z,{onUpgrade:()=>{ec("billing"),setTimeout(()=>{let e=document.querySelector("[data-pricing-section]");e&&e.scrollIntoView({behavior:"smooth"})},100)}}),(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:t.jsx(d.ll,{children:"Plan Management"})}),t.jsx(d.aY,{className:"space-y-4",children:es?.plan==="trial"?(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Upgrade your plan to unlock more features and deployments."}),t.jsx(o.z,{className:"w-full text-white dark:text-white",onClick:ed,disabled:P,children:P?(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):"Upgrade to Pro"}),t.jsx(o.z,{variant:"outline",className:"w-full dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",onClick:()=>ec("subscription"),children:"View All Plans"})]}):(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your subscription and billing."}),t.jsx(o.z,{variant:"outline",className:"w-full dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",onClick:eo,disabled:P,children:P?(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):"Update Payment Method"}),t.jsx(w,{onFetchBillingHistory:em,children:t.jsx(o.z,{variant:"outline",className:"w-full dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",disabled:P,children:P?(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):"View Billing History"})}),t.jsx(o.z,{variant:"destructive",className:"w-full text-white dark:text-white",onClick:ex,disabled:P,children:P?(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):"Cancel Subscription"})]})})]})]}),(0,t.jsxs)(d.Zb,{"data-pricing-section":!0,children:[(0,t.jsxs)(d.Ol,{children:[t.jsx(d.ll,{children:"Available Plans"}),t.jsx(d.SZ,{children:"Choose the plan that best fits your needs"})]}),t.jsx(d.aY,{children:t.jsx(p,{currentPlan:es?.plan})})]})]}),t.jsx(A.nU,{value:"settings",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(q.Z,{className:"h-5 w-5"}),"Profile Information"]}),t.jsx(d.SZ,{children:"Update your personal information"})]}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{children:"Profile Picture"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(F.qE,{className:"h-12 w-12",children:[N?t.jsx(F.F$,{src:N,alt:"Profile picture",className:"avatar-image"}):null,t.jsx(F.Q5,{className:"bg-primary text-primary-foreground",children:ev})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("label",{htmlFor:"settings-profile-picture-upload",children:[t.jsx(o.z,{variant:"outline",size:"sm",asChild:!0,disabled:el,className:"dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",children:(0,t.jsxs)("div",{className:"cursor-pointer",children:[el?t.jsx(h.Z,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(L.Z,{className:"h-4 w-4 mr-2"}),"Upload"]})}),t.jsx("input",{id:"settings-profile-picture-upload",type:"file",accept:"image/*",onChange:eg,className:"hidden",disabled:el})]}),N&&(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:eN,className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:[t.jsx(O,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]}),t.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG or GIF (max. 5MB)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"fullName",children:"Full Name"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(m.I,{id:"fullName",value:et.full_name,onChange:e=>er(s=>({...s,full_name:e.target.value})),disabled:!Q}),!Q&&t.jsx(o.z,{variant:"outline",size:"icon",onClick:()=>W(!0),className:"dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",children:t.jsx(V,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{htmlFor:"email",children:"Email Address"}),t.jsx(m.I,{id:"email",type:"email",value:et.email,disabled:!0,className:"bg-gray-50 dark:bg-gray-800 dark:text-white dark:border-gray-600"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Email address cannot be changed. Contact support if needed."})]}),Q&&(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(o.z,{onClick:eu,disabled:D,className:"text-white dark:text-white",children:D?(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(H,{className:"mr-2 h-4 w-4"}),"Save Changes"]})}),(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>W(!1),className:"dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",children:[t.jsx(R.Z,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx($.Z,{className:"h-5 w-5"}),"Security"]}),t.jsx(d.SZ,{children:"Manage your account security"})]}),t.jsx(d.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx(o.z,{variant:"outline",className:"w-full justify-start dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",children:"Change Password"}),t.jsx(o.z,{variant:"outline",className:"w-full justify-start dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",children:"Two-Factor Authentication"}),t.jsx(o.z,{variant:"outline",className:"w-full justify-start dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",children:"Connected Accounts"})]})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(G.Z,{className:"h-5 w-5"}),"Notifications"]}),t.jsx(d.SZ,{children:"Configure your notification preferences"})]}),t.jsx(d.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Deployment Updates"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when deployments complete"})]}),t.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Weekly Reports"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive weekly deployment summaries"})]}),t.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Security Alerts"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Important security notifications"})]}),t.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]})]})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(B.Z,{className:"h-5 w-5"}),"Theme"]}),t.jsx(d.SZ,{children:"Choose your preferred color scheme"})]}),t.jsx(d.aY,{className:"space-y-4",children:t.jsx(K,{})})]}),(0,t.jsxs)(d.Zb,{className:"border-red-200",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2 text-red-600",children:[t.jsx(E,{className:"h-5 w-5"}),"Danger Zone"]}),t.jsx(d.SZ,{children:"Irreversible actions that affect your account"})]}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx(o.z,{variant:"outline",className:"w-full justify-start border-red-200 text-red-600 hover:bg-red-50 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-950 dark:hover:text-red-300",children:"Download Account Data"}),t.jsx(o.z,{variant:"destructive",className:"w-full justify-start text-white dark:text-white",children:"Delete Account"})]}),(0,t.jsxs)(k.bZ,{className:"border-red-200",children:[t.jsx(E,{className:"h-4 w-4"}),t.jsx(k.X,{className:"text-red-600",children:"Account deletion is permanent and cannot be undone."})]})]})]})]})}),t.jsx(A.nU,{value:"debug",className:"space-y-6",children:t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(B.Z,{className:"h-5 w-5"}),"Authentication Debug"]}),t.jsx(d.SZ,{children:"Debug information for troubleshooting authentication and API issues"})]}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{children:"Authentication Status"}),(0,t.jsxs)("div",{className:"text-sm bg-muted p-3 rounded",children:[(0,t.jsxs)("div",{children:["Authenticated: ",s?"✅ Yes":"❌ No"]}),(0,t.jsxs)("div",{children:["Provider: ",e?.provider||"None"]}),(0,t.jsxs)("div",{children:["User ID: ",e?.id||"None"]}),(0,t.jsxs)("div",{children:["Username: ",e?.username||"None"]}),(0,t.jsxs)("div",{children:["Email: ",e?.email||"None"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{children:"API Endpoints Test"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(o.z,{variant:"outline",size:"sm",onClick:async()=>{try{let e=await fetch("https://api.codeflowops.com/api/v1/auth/github/user",{credentials:"include"});console.log("GitHub User API:",e.status,await e.text())}catch(e){console.error("API Test Error:",e)}},children:"Test GitHub User API"}),t.jsx(o.z,{variant:"outline",size:"sm",onClick:async()=>{try{let e=await fetch("https://api.codeflowops.com/api/quota/status",{credentials:"include"});console.log("Quota API:",e.status,await e.text())}catch(e){console.error("API Test Error:",e)}},children:"Test Quota API"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{children:"GitHub OAuth Login"}),(0,t.jsxs)(o.z,{onClick:()=>{window.location.href="https://api.codeflowops.com/api/v1/auth/github"},className:"w-full",children:[t.jsx(T.Z,{className:"mr-2 h-4 w-4"}),"Login with GitHub OAuth"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(x._,{children:"Manual Profile Refresh"}),(0,t.jsxs)(o.z,{variant:"outline",onClick:a,className:"w-full",children:[t.jsx(X,{className:"mr-2 h-4 w-4"}),"Refresh User Profile"]})]})]})]})})})]})]})})}function K(){let{theme:e,setTheme:s,resolvedTheme:a}=(0,n.F)(),r=[{name:"Light",value:"light",icon:Q.Z},{name:"Dark",value:"dark",icon:W.Z},{name:"System",value:"system",icon:B.Z}];return t.jsx("div",{className:"space-y-3",children:r.map(r=>{let l=r.icon,i=e===r.value;return(0,t.jsxs)(o.z,{variant:i?"default":"outline",className:`w-full justify-start ${i?"text-white dark:text-white":"dark:text-white dark:border-gray-600 dark:hover:bg-gray-700"}`,onClick:()=>s(r.value),children:[t.jsx(l,{className:"h-4 w-4 mr-2"}),r.name,"system"===r.value&&a&&(0,t.jsxs)("span",{className:"ml-auto text-xs text-muted-foreground",children:["(",a,")"]})]},r.value)})})}function ee(){return t.jsx(r.Suspense,{fallback:t.jsx("div",{children:"Loading..."}),children:t.jsx(J,{})})}},3273:(e,s,a)=>{"use strict";a.d(s,{X:()=>d,bZ:()=>c});var t=a(326),r=a(7577),l=a(9360),i=a(7863);let n=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=r.forwardRef(({className:e,variant:s,...a},r)=>t.jsx("div",{ref:r,role:"alert",className:(0,i.cn)(n({variant:s}),e),...a}));c.displayName="Alert",r.forwardRef(({className:e,...s},a)=>t.jsx("h5",{ref:a,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...s}));d.displayName="AlertDescription"},567:(e,s,a)=>{"use strict";a.d(s,{C:()=>n});var t=a(326);a(7577);var r=a(9360),l=a(7863);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...a}){return t.jsx("div",{className:(0,l.cn)(i({variant:s}),e),...a})}},2643:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>n,SZ:()=>d,Zb:()=>i,aY:()=>o,eW:()=>m,ll:()=>c});var t=a(326),r=a(7577),l=a(7863);let i=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let m=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},2288:(e,s,a)=>{"use strict";a.d(s,{$N:()=>p,Be:()=>f,Vq:()=>c,cN:()=>h,cZ:()=>x,fK:()=>u,hg:()=>d});var t=a(326),r=a(7577),l=a(8958),i=a(4019),n=a(7863);let c=l.fC,d=l.xz,o=l.h_;l.x8;let m=r.forwardRef(({className:e,...s},a)=>t.jsx(l.aV,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));m.displayName=l.aV.displayName;let x=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(o,{children:[t.jsx(m,{}),(0,t.jsxs)(l.VY,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[s,(0,t.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(i.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));x.displayName=l.VY.displayName;let u=({className:e,...s})=>t.jsx("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});u.displayName="DialogHeader";let h=({className:e,...s})=>t.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});h.displayName="DialogFooter";let p=r.forwardRef(({className:e,...s},a)=>t.jsx(l.Dx,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));p.displayName=l.Dx.displayName;let f=r.forwardRef(({className:e,...s},a)=>t.jsx(l.dk,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));f.displayName=l.dk.displayName},4432:(e,s,a)=>{"use strict";a.d(s,{I:()=>i});var t=a(326),r=a(7577),l=a(7863);let i=r.forwardRef(({className:e,type:s,...a},r)=>t.jsx("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));i.displayName="Input"},1048:(e,s,a)=>{"use strict";a.d(s,{_:()=>d});var t=a(326),r=a(7577),l=a(4478),i=a(9360),n=a(7863);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},a)=>t.jsx(l.f,{ref:a,className:(0,n.cn)(c(),e),...s}));d.displayName=l.f.displayName},64:(e,s,a)=>{"use strict";a.d(s,{E:()=>i});var t=a(326),r=a(7577),l=a(7863);let i=r.forwardRef(({className:e,value:s,...a},r)=>t.jsx("div",{ref:r,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:t.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));i.displayName="Progress"},9210:(e,s,a)=>{"use strict";a.d(s,{SP:()=>d,dr:()=>c,mQ:()=>n,nU:()=>o});var t=a(326),r=a(7577),l=a(8407),i=a(7863);let n=l.fC,c=r.forwardRef(({className:e,...s},a)=>t.jsx(l.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=l.aV.displayName;let d=r.forwardRef(({className:e,...s},a)=>t.jsx(l.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=l.xz.displayName;let o=r.forwardRef(({className:e,...s},a)=>t.jsx(l.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=l.VY.displayName},4571:(e,s,a)=>{"use strict";a.d(s,{_:()=>r});var t=a(7577);function r({onSuccess:e,onError:s}={}){let[a,r]=(0,t.useState)(!1),[l,i]=(0,t.useState)(null),n="https://api.codeflowops.com",c=()=>{let e=localStorage.getItem("codeflowops_access_token");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},d=async(e,s={})=>{let a=localStorage.getItem("codeflowops_access_token");return fetch(e,{...s,credentials:"include",headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...s.headers}})};return{loading:a,error:l,createSubscription:async a=>{try{r(!0),i(null);let s=await d(`${n}/api/v1/billing/subscribe/${a.planTier}`,{method:"POST",body:JSON.stringify({pricing_context:a.pricingContext||{},trial_days:a.trialDays})});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to create subscription")}let t=await s.json();if(t.subscription.client_secret)return{...t,requires_payment:!0,client_secret:t.subscription.client_secret};return e?.(t),t}catch(a){let e=a instanceof Error?a.message:"An error occurred";throw i(e),s?.(e),a}finally{r(!1)}},upgradeSubscription:async a=>{try{r(!0),i(null);let s=await d(`${n}/api/v1/payments/upgrade-subscription`,{method:"POST",body:JSON.stringify({subscription_id:a.subscriptionId,new_plan_tier:a.newPlanTier,pricing_context:a.pricingContext||{}})});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to upgrade subscription")}let t=await s.json();return e?.(t),t}catch(a){let e=a instanceof Error?a.message:"An error occurred";throw i(e),s?.(e),a}finally{r(!1)}},cancelSubscription:async(a,t=!0)=>{try{r(!0),i(null);let s=await fetch(`${n}/api/v1/payments/cancel-subscription`,{method:"POST",headers:c(),body:JSON.stringify({subscription_id:a,at_period_end:t})});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to cancel subscription")}let l=await s.json();return e?.(l),l}catch(a){let e=a instanceof Error?a.message:"An error occurred";throw i(e),s?.(e),a}finally{r(!1)}},getSubscriptionStatus:async()=>{try{r(!0),i(null);let e=await fetch(`${n}/api/v1/payments/user-subscription-status`,{headers:c()});if(!e.ok){let s=await e.json();throw Error(s.detail||"Failed to get subscription status")}return await e.json()}catch(a){let e=a instanceof Error?a.message:"An error occurred";throw i(e),s?.(e),a}finally{r(!1)}},getPricingWithPaymentInfo:async(e={})=>{try{r(!0),i(null);let s=new URLSearchParams;Object.keys(e).map(s=>[s,e[s]]).forEach(([e,a])=>{a&&s.append(e,a.toString())});let a=await fetch(`${n}/api/v1/payments/pricing-with-payment-info?${s.toString()}`,{headers:c()});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to get pricing information")}return await a.json()}catch(a){let e=a instanceof Error?a.message:"An error occurred";throw i(e),s?.(e),a}finally{r(!1)}},getCustomerPortalUrl:async()=>{try{r(!0),i(null);let e=await fetch(`${n}/api/v1/payments/customer-portal`,{method:"POST",headers:c()});if(!e.ok){let s=await e.json();throw Error(s.detail||"Failed to get customer portal URL")}return(await e.json()).url}catch(a){let e=a instanceof Error?a.message:"An error occurred";throw i(e),s?.(e),a}finally{r(!1)}},getBillingHistory:async()=>{try{r(!0),i(null);let e=await fetch(`${n}/api/v1/payments/billing-history`,{headers:c()});if(!e.ok){let s=await e.json();throw Error(s.detail||"Failed to get billing history")}return await e.json()}catch(a){let e=a instanceof Error?a.message:"An error occurred";throw i(e),s?.(e),a}finally{r(!1)}},clearError:()=>i(null)}}},7358:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},4659:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8916:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},1821:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},1540:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2893:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]])},4014:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},5932:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},4591:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`C:\ClayDesk.AI\codeflowops-saas\frontend\app\profile\page.tsx#default`)},4478:(e,s,a)=>{"use strict";a.d(s,{f:()=>n});var t=a(7577),r=a(5226),l=a(326),i=t.forwardRef((e,s)=>(0,l.jsx)(r.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var n=i}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[771,698,879],()=>a(1060));module.exports=t})();